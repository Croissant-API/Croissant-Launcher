<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <script>
    nw.Window.get().maximize();

    var gui = nw;
    var win = gui.Window.get();
    var tray = new gui.Tray({ icon: 'icon.png', tooltip: 'App Tray' });

    // Empêcher la fermeture de l'application quand la fenêtre se ferme
    win.on('close', function () {
      this.hide(); // Cache la fenêtre au lieu de la fermer
    });

    // Afficher la fenêtre sur double-clic du tray
    tray.on('click', function (event) {
      // if (event && event.clickCount === 2) {
      win.show();
      win.focus();
      // }
    });

    var menu = new gui.Menu();
    menu.append(new gui.MenuItem({
      label: 'Show',
      click: function () {
        win.show();
        win.focus();
      }
    }));
    menu.append(new gui.MenuItem({
      label: 'Quit',
      click: function () {
        gui.App.quit();
      }
    }));

    tray.menu = menu;

    console.log('Tray icon created and menu set up');
  </script>
  <!-- <script src="src/app/app.js"></script> -->
</head>

<body>
  <iframe src="http://localhost:8580/launcher"
    style="width: 100%; height: 100%; border: none; position: absolute; top: 0; left: 0;"></iframe>
</body>

</html>